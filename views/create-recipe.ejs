<%- include('partials/_header', { title: 'Beer Recipe Manager' }) %>

<div class="container">
  <div class="page-header">
    <h2>Create New Recipe</h2>
    <a href="/recipes" class="btn secondary">Back to Recipes</a>
  </div>

  <form id="recipe-form" action="/recipes" method="POST">
    <div class="recipe-section">
      <h3>General Information</h3>
      <div class="form-group">
        <label for="name">Recipe Name*</label>
        <input type="text" id="name" name="name" required>
      </div>
      <div class="form-group">
        <label for="brewer">Brewer</label>
        <input type="text" id="brewer" name="brewer">
      </div>
      <div class="form-group">
        <label for="style">Style</label>
        <input type="text" id="style" name="style">
      </div>
      <div class="form-group">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes"></textarea>
      </div>
    </div>

    <div class="recipe-section">
      <h3>Recipe Statistics</h3>
      <div class="stats-grid">
        <div class="form-group">
          <label for="batchSize">Batch Size (L)*</label>
          <input type="number" id="batchSize" name="batchSize" step="0.1" min="0" required>
        </div>
        <div class="form-group">
          <label for="boilSize">Boil Size (L)</label>
          <input type="number" id="boilSize" name="boilSize" step="0.1" min="0">
        </div>
        <div class="form-group">
          <label for="efficiency">Efficiency (%)</label>
          <input type="number" id="efficiency" name="efficiency" min="0" max="100">
        </div>
        <div class="form-group">
          <label for="originalGravity">Original Gravity</label>
          <input type="number" id="originalGravity" name="originalGravity" step="0.001" min="1.000">
        </div>
        <div class="form-group">
          <label for="finalGravity">Final Gravity</label>
          <input type="number" id="finalGravity" name="finalGravity" step="0.001" min="0.980">
        </div>
        <div class="form-group">
          <label for="ibu">IBU</label>
          <input type="number" id="ibu" name="ibu" step="0.1" min="0">
        </div>
        <div class="form-group">
          <label for="abv">ABV (%)</label>
          <input type="number" id="abv" name="abv" step="0.1" min="0">
        </div>
        <div class="form-group">
          <label for="color">Color (EBC)</label>
          <input type="number" id="color" name="color" step="0.1" min="0">
        </div>
      </div>
    </div>

    <div class="recipe-section">
      <h3>Fermentables</h3>
      <div id="fermentables-container"></div>
      <button type="button" id="add-fermentable" class="add-button">
        <span class="material-icons">add</span> Add Fermentable
      </button>
    </div>

    <div class="recipe-section">
      <h3>Hops</h3>
      <div id="hops-container"></div>
      <button type="button" id="add-hop" class="add-button">
        <span class="material-icons">add</span> Add Hop
      </button>
    </div>

    <div class="recipe-section">
      <h3>Yeasts</h3>
      <div id="yeasts-container"></div>
      <button type="button" id="add-yeast" class="add-button">
        <span class="material-icons">add</span> Add Yeast
      </button>
    </div>

    <div class="recipe-section">
      <h3>Mash Schedule</h3>
      <div id="mash-steps-container"></div>
      <button type="button" id="add-mash-step" class="add-button">
        <span class="material-icons">add</span> Add Mash Step
      </button>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn primary">Save Recipe</button>
      <button type="button" class="btn secondary" onclick="window.location.href='/recipes'">Cancel</button>
    </div>
  </form>
</div>

<script src="/js/recipe-form.js"></script>

<%- include('partials/_footer') %>