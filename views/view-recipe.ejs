<%- include('layouts/main', { title: recipe.name }) %>

<div class="container">
  <div class="page-header">
    <h2><%= recipe.name %></h2>
    <div class="action-buttons">
      <a href="/recipes" class="btn secondary">Back to Recipes</a>
      <a href="/recipes/<%= recipe._id %>/edit" class="btn primary">Edit Recipe</a>
      <form action="/recipes/<%= recipe._id %>?_method=DELETE" method="POST" class="delete-form">
        <button type="submit" class="btn danger" onclick="return confirm('Are you sure you want to delete this recipe?')">Delete</button>
      </form>
    </div>
  </div>

  <div class="recipe-content">
    <section id="general-info" class="card">
      <h3>General Information</h3>
      <div class="card-content">
        <div class="info-grid">
          <% if (recipe.brewer) { %>
            <div class="info-item">
              <div class="info-label">Brewer</div>
              <div class="info-value"><%= recipe.brewer %></div>
            </div>
          <% } %>
          <% if (recipe.style) { %>
            <div class="info-item">
              <div class="info-label">Style</div>
              <div class="info-value"><%= recipe.style %></div>
            </div>
          <% } %>
        </div>
        <% if (recipe.notes) { %>
          <div class="info-item">
            <div class="info-label">Notes</div>
            <div class="info-value"><%= recipe.notes %></div>
          </div>
        <% } %>
      </div>
    </section>

    <%- include('partials/_stats', { recipe }) %>
    
    <%- include('partials/_fermentables', { recipe }) %>
    
    <%- include('partials/_hops', { recipe }) %>
    
    <%- include('partials/_yeast', { recipe }) %>
    
    <%- include('partials/_mash', { recipe }) %>
  </div>
</div>

<!-- <script>
  // Helper functions for the view
  function ebcToColor(ebc) {
    // Simplified SRM = EBC * 0.508
    const srm = ebc * 0.508;
    
    // Color conversion logic based on SRM value
    if (srm <= 2) return '#FFE699'; // Very light
    if (srm <= 3) return '#FFD878'; // Light
    if (srm <= 4) return '#FFCA5A'; // Pale
    if (srm <= 6) return '#FFBF42'; // Gold
    if (srm <= 8) return '#FBB123'; // Amber
    if (srm <= 10) return '#F8A600'; // Deep amber
    if (srm <= 13) return '#E78A00'; // Copper
    if (srm <= 17) return '#D47500'; // Deep copper
    if (srm <= 20) return '#C63C00'; // Brown
    if (srm <= 24) return '#8D2900'; // Dark brown
    if (srm <= 29) return '#5D1900'; // Very dark brown
    if (srm <= 35) return '#2E0E00'; // Black
    return '#000000'; // Very black
  }

  function hopUseToColor(use) {
    const useType = use.toLowerCase();
    if (useType === 'boil') return '#4CAF50'; // Green
    if (useType === 'dry hop') return '#2196F3'; // Blue
    if (useType === 'mash') return '#FF9800'; // Orange
    if (useType === 'first wort') return '#9C27B0'; // Purple
    if (useType === 'aroma') return '#00BCD4'; // Cyan
    return '#607D8B'; // Default blue-grey
  }

  function yeastTypeToColor(type) {
    const yeastType = type.toLowerCase();
    if (yeastType === 'ale') return '#FF9800'; // Orange
    if (yeastType === 'lager') return '#2196F3'; // Blue
    if (yeastType === 'wheat') return '#FFEB3B'; // Yellow
    if (yeastType === 'wine') return '#9C27B0'; // Purple
    if (yeastType === 'champagne') return '#00BCD4'; // Cyan
    return '#607D8B'; // Default blue-grey
  }

  function formatHopTime(time, use) {
    const timeValue = parseFloat(time);
    if (isNaN(timeValue)) return '-';
    
    const useType = use ? use.toLowerCase() : 'boil';
    
    if (useType === 'dry hop') {
      return timeValue === 1 ? '1 day' : `${timeValue} days`;
    }
    
    return timeValue === 1 ? '1 min' : `${timeValue} min`;
  }
</script> -->
